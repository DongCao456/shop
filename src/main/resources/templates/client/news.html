
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" th:href="@{/images/icons/mobile.png}">
    <title>
        Phone
    </title>
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,700,500italic,100italic,100' rel='stylesheet' type='text/css'>
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/flexslider.css}" type="text/css" media="screen"/>
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div class="wrapper">
    <!-- Header -->
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-2 col-sm-2">
                    <div class="logo"><a th:href="@{/client/index}"><img th:src="@{/images/logot3h.png}" alt="T3HShop"></a></div>
                </div>
                <div class="col-md-10 col-sm-10">
                    <div class="header_top">
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="topmenu">
                                    <li><form th:action="@{/client/logout}" method="post">
                                        <input type="submit" value="Logout" />
                                    </form></li>
                                </ul>
                            </div>
                            <div class="col-md-3">
                                <ul class="usermenu">
                                    <li>
                                        <a href="#" class="log">
                                            Chào người dùng <div sec:authentication="name"></div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="header_bottom">
                        <ul class="option">
                            <li class="option-cart">
                                <a th:href="@{/client/cart/{username}(username=${#authentication.name})}" class="cart-icon"></a>
                            </li>
                        </ul>
                        <div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div>
                        <div class="navbar-collapse collapse">
                            <ul class="nav navbar-nav">
                                <li><a th:href="@{/client/index}">Home</a></li>
                                <li><a th:href="@{/client/phone/{username}(username=${#authentication.name})}">Phone</a></li>
                                <li><a th:href="@{/client/laptop/{username}(username=${#authentication.name})}">Laptop</a></li>
                                <li><a th:href="@{/client/tablet/{username}(username=${#authentication.name})}">Tablet</a></li>
                                <li><a th:href="@{/client/watch/{username}(username=${#authentication.name})}">Watch</a></li>
                                <li><a th:href="@{/client/accessory/{username}(username=${#authentication.name})}">Phụ kiện</a></li>
                                <li class="active"><a th:href="@{/client/news/{username}(username=${#authentication.name})}">Tin tức</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Body  -->
    <div class="clearfix">
    </div>
    <div class="container_fullwidth">
        <div class="container">
            <div class="row">
                <div class="col-md-3">


                    <!-- Left banners   -->
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/iphone-14-pro-max-hands-on.webp}" alt="">
                    </div>
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/ip13.jpg}" alt="">
                    </div>
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/ip12.jfif}" alt="">
                    </div>
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/ip11.jfif}" alt="">
                    </div>
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/xsm.jpg}" alt="">
                    </div>
                    <div class="leftbanner">
                        <img th:src="@{/images/banners/iphone/-iphone-8-plus-128gb-slider.jpg}" alt="">
                    </div>
                    <!-- Facebook like -->
                    <div class="fbl-box leftbar">
                        <h3 class="title">
                            Facebook
                        </h3>
                        <span class="likebutton">
                  <a href="#">
                    <img th:src="@{/images/fblike.png}" alt="">
                  </a>
                </span>
                        <p>
                            12k người thích T3H Shop.
                        </p>
                        <div class="fbplug">
                            <a href="#">
                    <span>
                      <img th:src="@{/images/fbicon.png}" alt="">
                    </span>
                                Facebook social plugin
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Slides -->
                <div class="col-md-9">
                    <div class="banner">
                        <div class="bannerslide" id="bannerslide">
                            <ul class="slides">
                                <li>
                                    <a href="#">
                                        <img th:src="@{/images/slide/iphone/ip14.jpg}" alt=""/>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img th:src="@{/images/slide/iphone/ipx.jpg}" alt=""/>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img th:src="@{/images/slide/iphone/ip12.webp}" alt=""/>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="clearfix">
                    </div>
                    <!-- Form filter -->
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label for="name">Tên sản phẩm:</label>
                            <input type="text" class="form-control" id="name">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="price">Giá sản phẩm:</label>
                            <input type="number" class="form-control" id="price">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="brandName">Thương hiệu:</label>
                            <input type="text" class="form-control" id="brandName">
                        </div>
                    </div>
                    <button id="btnSearch" onclick="searchCondition(0,5)" class="btn btn-primary">Tìm kiếm</button>
                    <hr>
                    <!-- Products  -->
                    <table class="table" id="tableDate">
                        <thead>
                        <tr>
                            <th>Mã sản phẩm</th>
                            <th style="width: 15%;">Tên sản phẩm</th>
                            <th>Hình ảnh</th>
                            <th>Giá sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Thương hiệu</th>
                            <th>Loại sản phẩm</th>
                            <th>Hành động</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                    <nav aria-label="...">
                        <ul class="pagination" id="pageId" style="float: right;">
                            <!--            <li class="page-item">-->
                            <!--                <a class="page-link" href="#">1</a></li>-->
                            <!--            <li class="page-item active">-->
                            <!--                <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>-->
                            <!--            </li>-->
                            <!--            <li class="page-item"><a class="page-link" href="#">3</a></li>-->
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- Brands -->
            <div class="clearfix">
            </div>
            <div class="our-brand">
                <h3 class="title">Thương hiệu <strong>HOT</strong></h3>
                <div class="control"><a id="prev_brand" class="prev" href="#">&lt;</a><a id="next_brand" class="next" href="#">&gt;</a></div>
                <ul id="braldLogo">
                    <li>
                        <ul class="brand_item">
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/apple.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/dell.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/xiaomi.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/acer.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/logitech.png}" alt=""></div>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul class="brand_item">
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/lenovo.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/oppo.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/asus.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/msi.png}" alt=""></div>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="brand-logo"><img th:src="@{/images/brands/dell.png}" alt=""></div>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <div class="clearfix"></div>
    <div class="footer">
        <div class="footer-info">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <div class="footer-logo"><a href="#"><img th:src="@{/images/logot3h.png}" alt=""></a></div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <h4 class="title">Thông tin <strong>liên lạc</strong></h4>
                        <p>Tô Hiệu - Lê Chân - Hải Phòng</p>
                        <p>Điện thoại : (+84) 94 821 25 16</p>
                        <p>Email : phamminhhiep0402@gmail.com</p>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <h4 class="title">Chăm sóc<strong> Khách hàng</strong></h4>
                        <ul class="support">
                            <li><a href="#">FAQ</a></li>
                            <li><a href="#">Payment Option</a></li>
                            <li><a href="#">Booking Tips</a></li>
                            <li><a href="#">Infomation</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h4 class="title">Đón nhận <strong>tin tức mới nhất </strong></h4>
                        <p>Thông tin mới nhất về các sản phẩm</p>
                        <form class="newsletter">
                            <input type="text" name="" placeholder="Nhập email của bạn....">
                            <input type="submit" value="Đăng ký" class="button">
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright-info">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>Copyright © 2023. Designed by <a href="https://www.facebook.com/pham.minhhiep.1232/">Pham Minh Hiep</a>. All rights reseved</p>
                    </div>
                    <div class="col-md-6">
                        <ul class="social-icon">
                            <li><a href="https://www.linkedin.com/in/hiep-pham-minh-09a047265/" class="linkedin"></a></li>
                            <li><a href="https://mail.google.com/mail/?view=cm&to=phamminhhiep0402@gmail.com" class="google-plus"></a></li>
                            <li><a href="https://www.facebook.com/pham.minhhiep.1232/" class="facebook"></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Bootstrap core JavaScript==================================================-->
<script type="text/javascript" th:src="@{/js/jquery.easing.1.3.js}">
</script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}">
</script>
<script defer th:src="@{/js/jquery.flexslider.js}">
</script>
<script type="text/javascript" th:src="@{/js/jquery.sequence-min.js}">
</script>
<script type="text/javascript" th:src="@{/js/jquery.carouFredSel-6.2.1-packed.js}">
</script>
<script type="text/javascript" th:src="@{/js/script.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery-1.10.2.min.js}"></script>
</body>
<!-- Custom Javascript Code   -->
<script>
    // vừa load xong trang web sẽ chạy luôn
    $(document).ready(function (){
        initData();
    })

    function initData(){
        let page=0;
        let size=5;
        let objFilter = {
            name:null
        };
        getPhones(page,size,objFilter);
    }

    function getPhones(page, size, objectFilter) {
        let bodyTable = $('#tableDate > tbody');
        bodyTable.empty();
        $.ajax({
            type: "POST",
            url: "http://localhost:8080/phone?page=" + page + "&size=" + size,
            contentType: "application/json",
            data: JSON.stringify(objectFilter),
            dataType: "json",
            success: function (response) {
                console.log(response);
                let products = response?.data?.content;
                for (let i = 0; i < products.length; i++) {
                    data = products[i];
                    let row = '<tr>' +
                        '<td>' + data.id + '</td>' +
                        '<td style="width: 15%;">' + data.name + '</td>' +
                        '<td>' + '<img style="width: 50px;height: 50px" src="' + data.image + '">' + '</td>' +
                        '<td>' + data.price + '</td>' +
                        '<td>' + data.quantity + '</td>' +
                        '<td>' + data.brandName + '</td>' +
                        '<td>' + data.cateName + '</td>';
                    row +=
                        '<td> <a class="btn btn-warning" onclick="editProduct(' + data.id + ')" href="#">Sửa</a> ' +
                        '<a style="margin-left: 10%" class="btn btn-danger" onclick="editProduct(' + data.id + ')" href="#">Xóa</a> </td>' +
                        '</tr>'
                    $('#tableDate').append(row);
                }

                // Phân trang
                let totalPage = response.data.totalPages;
                let currentPage = response.data.pageable.pageNumber;
                if (totalPage > 0) {
                    $("#pageId").empty();
                    let pages = '<li class="page-item"><a class="page-link" onclick="changePage(' + (currentPage - 1) + ',5,event)" href="#">Previous</a></li>';
                    for (let i = 0; i < totalPage; i++) {
                        if (currentPage === i) {
                            pages += '            <li class="page-item active">\n' +
                                '                <a class="page-link " onclick="changePage(' + i + ',5,event)" href="#">' + (i + 1) + '</a></li>\n' +
                                '            <li class="page-item">'
                        } else {
                            pages += '            <li class="page-item">\n' +
                                '                <a class="page-link" onclick="changePage(' + i + ',5,event)" href="#">' + (i + 1) + '</a></li>\n' +
                                '            <li class="page-item">'
                        }

                    }
                    pages += '<li class="page-item"><a class="page-link" onclick="changePage(' + (currentPage + 1) + ',5,event)" href="#">Next</a></li>';
                    $("#pageId").append(pages);
                }
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
    function addToCart(id){

    }

    function searchCondition(page,size){
        let filter = {};
        filter.name= $("#name").val() === '' ? null : $("#name").val();
        filter.price = $("#price").val() === '' ? null : $("#price").val();
        filter.brandId = $("#brandId").val() === '' ? null : $("#brandId").val();
        getPhones(page,size,filter);
    }

    function changePage(page,size,event){
        event.preventDefault();
        searchCondition(page,size);
    }
</script>
</body>
</html>